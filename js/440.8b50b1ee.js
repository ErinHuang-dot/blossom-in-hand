"use strict";(self["webpackChunkp_blossom"]=self["webpackChunkp_blossom"]||[]).push([[440],{2440:function(t,a,e){e.r(a),e.d(a,{default:function(){return X}});var o=e(6252),s=e(3577),d=e(9963);const r={class:"container"},n={class:"mt-3 mb-7"},l=(0,o._)("h3",{class:"py-3"},"購物車",-1),i={key:0,class:"row"},c={class:"col-md-8"},p={class:"table"},u=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{scope:"col",class:"border-0 ps-0",style:{width:"80px"}},"購買品項"),(0,o._)("th",{scope:"col",class:"border-0"}),(0,o._)("th",{scope:"col",class:"border-0"},"數 量"),(0,o._)("th",{scope:"col",class:"border-0 text-end"},"金 額"),(0,o._)("th",{scope:"col",class:"border-0 text-center"},"移 除")])],-1),b={scope:"row",class:"border-0 px-0 font-weight-normal py-4"},h=["src","alt"],m={class:"border-0 align-middle"},g={class:"mb-0 fw-bold ms-2 d-inline-block"},_={class:"border-0 align-middle",style:{"max-width":"160px"}},w={class:"input-group pe-5"},y={class:"input-group-prepend"},f=["onClick"],v=["onUpdate:modelValue","onChange"],x={class:"input-group-append"},D=["onClick"],C={class:"border-0 align-middle text-end"},k={class:"mb-0 ms-auto"},L={class:"border-0 align-middle text-center"},I=["onClick"],$={class:"input-group w-50 mb-3"},W={class:"input-group-append"},q={class:"col-md-4"},z={class:"border border-ad-secondary rounded-2 p-4 mb-4"},U=(0,o._)("h4",{class:"fw-bold mb-4"},"訂單金額",-1),j={class:"table text-muted border-bottom border-ad-secondary"},H=(0,o._)("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"小 計",-1),M={class:"text-end border-0 px-0 pt-4"},V=(0,o._)("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"優惠券代碼",-1),Q={key:0,class:"text-end text-ad-warning border-0 px-0 pt-0 pb-4"},B={key:1,class:"text-end border-0 px-0 pt-0 pb-4"},G={class:"d-flex justify-content-between mt-4"},Y=(0,o._)("p",{class:"mb-0 h4 fw-bold"},"總 計",-1),A={key:0,class:"mb-0 h4 fw-bold"},K={key:1,class:"mb-0 h4 fw-bold"},R=(0,o.Uk)("進入結帳"),Z={key:1,class:"row"},E={class:"col-md-8"},F=(0,o._)("p",{class:"border border-primary rounded-2 p-4"},"還沒有挑到喜歡的商品嗎？",-1),J=(0,o.Uk)(" 繼續挑花買花 "),N=(0,o._)("div",{class:"col-md-4"},[(0,o._)("img",{class:"w-100 rounded-2",style:{"min-height":"300px","object-fit":"cover","object-position":"center"},src:"https://images.unsplash.com/photo-1492409678553-da87ed48ffee?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80",alt:""})],-1);function O(t,a,e,O,P,S){const T=(0,o.up)("v-loading"),X=(0,o.up)("vue-feather"),tt=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(T,{active:P.isLoading},null,8,["active"]),(0,o._)("div",n,[l,P.cartData.total?((0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("div",c,[(0,o._)("button",{type:"button",class:"btn btn-outline-ad-secondary float-end mb-3",onClick:a[0]||(a[0]=t=>S.deleteCartData(P.cartData.carts.id))},"清空購物車"),(0,o._)("table",p,[u,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(P.cartData.carts,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.id,class:"border-bottom border-top border-ad-secondary"},[(0,o._)("th",b,[(0,o._)("img",{src:t.product.imageUrl,alt:t.product.title,class:"rounded-2",style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,h)]),(0,o._)("td",m,[(0,o._)("p",g,(0,s.zw)(t.product.title),1)]),(0,o._)("td",_,[(0,o._)("div",w,[(0,o._)("div",y,[(0,o._)("button",{onClick:a=>t.qty--,class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon1"},[(0,o.Wm)(X,{type:"minus",class:"align-middle"})],8,f)]),(0,o.wy)((0,o._)("input",{type:"number",min:"1","onUpdate:modelValue":a=>t.qty=a,onChange:a=>S.updateCartItem(t),class:"hide-arrows form-control border-0 text-center my-auto shadow-none","aria-describedby":"button-addon1"},null,40,v),[[d.nr,t.qty]]),(0,o._)("div",x,[(0,o._)("button",{onClick:a=>t.qty++,class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon2"},[(0,o.Wm)(X,{type:"plus",class:"align-middle"})],8,D)])])]),(0,o._)("td",C,[(0,o._)("p",k,"$ "+(0,s.zw)(t.total),1)]),(0,o._)("td",L,[(0,o._)("button",{type:"button",class:"btn",onClick:a=>S.removeCartItem(t.id)},[(0,o.Wm)(X,{type:"x",class:"align-middle"})],8,I)])])))),128))])]),(0,o._)("div",$,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>P.cartData.couponCode=t),type:"text",class:"form-control rounded-0 border-bottom border-top-0 border-start-0 border-end-0 border-ad-secondary shadow-none",placeholder:"請輸入優惠券代碼","aria-label":"Recipient's username","aria-describedby":"button-addon2"},null,512),[[d.nr,P.cartData.couponCode]]),(0,o._)("div",W,[(0,o._)("button",{onClick:a[2]||(a[2]=t=>S.applyCoupon()),class:"btn btn-outline-primary border-bottom border-top-0 border-start-0 border-end-0 border-ad-secondary rounded-0",type:"button",id:"button-addon2"},[(0,o.Wm)(X,{type:"send",class:"align-middle me-2"})])])])]),(0,o._)("div",q,[(0,o._)("div",z,[U,(0,o._)("table",j,[(0,o._)("tbody",null,[(0,o._)("tr",null,[H,(0,o._)("td",M,"$ "+(0,s.zw)(P.cartData.total),1)]),(0,o._)("tr",null,[V,P.cartData.couponCode?((0,o.wg)(),(0,o.iD)("td",Q,(0,s.zw)(P.cartData.couponCode),1)):((0,o.wg)(),(0,o.iD)("td",B,"未使用"))])])]),(0,o._)("div",G,[Y,P.cartData.couponCode?((0,o.wg)(),(0,o.iD)("p",A,"$ "+(0,s.zw)(Math.round(P.cartData.final_total)),1)):((0,o.wg)(),(0,o.iD)("p",K,"$ "+(0,s.zw)(P.cartData.total),1))]),(0,o.Wm)(tt,{to:"/checkout",class:"btn btn-accent w-100 mt-4"},{default:(0,o.w5)((()=>[R])),_:1})])])])):((0,o.wg)(),(0,o.iD)("div",Z,[(0,o._)("div",E,[F,(0,o.Wm)(tt,{to:"/products"},{default:(0,o.w5)((()=>[(0,o.Wm)(X,{type:"chevron-left"}),J])),_:1})]),N]))])])}var P={data(){return{products:[],cartData:{couponCode:""},productQty:1,productId:"",isLoadingItem:"",isLoading:!1}},methods:{getCartData(){const t="https://vue3-course-api.hexschool.io/v2/api/erinhuang-lab/cart";this.$http.get(t).then((t=>{this.cartData=t.data.data})).catch((t=>{console.log(t.data.data.message)}))},removeCartItem(t){this.isLoadingItem=t;const a=`https://vue3-course-api.hexschool.io/v2/api/erinhuang-lab/cart/${t}`;this.isLoading=!0,this.$http.delete(a).then((t=>{this.isLoading=!1,alert(t.data.message),this.getCartData(),this.isLoadingItem=""})).catch((t=>{window.alert(t.data.message)}))},deleteCartData(t){this.isLoadingItem=t,alert("您確定要移除購物車內所有商品嗎？"),this.isLoading=!0;const a="https://vue3-course-api.hexschool.io/v2/api/erinhuang-lab/carts";this.$http.delete(a).then((t=>{this.isLoading=!1,alert(t.data.message),console.log(t),this.getCartData(),this.isLoadingItem=""})).catch((t=>{window.alert(t.response.data.message)}))},updateCartItem(t){this.productQty=t.qty;const a={product_id:t.id,qty:this.productQty};this.isLoadingItem=t.id;const e=`https://vue3-course-api.hexschool.io/v2/api/erinhuang-lab/cart/${t.id}`;this.$http.put(e,{data:a}).then((t=>{console.log(t.data),alert(t.data.message),this.getCartData(),this.isLoadingItem=""})).catch((t=>{window.alert(t.response.data.message)}))},applyCoupon(){const t={code:this.cartData.couponCode};this.isLoading=!0;const a="https://vue3-course-api.hexschool.io/v2/api/erinhuang-lab/coupon";this.$http.post(a,{data:t}).then((t=>{this.isLoading=!1,alert(t.data.message),this.cartData.final_total=t.data.data.final_total})).catch((t=>{alert(t.response.data.message)}))}},mounted(){this.getCartData()}},S=e(3744);const T=(0,S.Z)(P,[["render",O]]);var X=T}}]);
//# sourceMappingURL=440.8b50b1ee.js.map