{"version":3,"file":"js/533.82e03922.js","mappings":"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","sources":["webpack://p-blossom/./src/views/CheckoutForm.vue","webpack://p-blossom/./src/views/CheckoutForm.vue?e478"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!-- progress-bar -->\r\n    <div class=\"row justify-content-center\">\r\n      <div class=\"col-md-10 py-6\">\r\n        <ul class=\"list-unstyled mb-0 ms-md-auto d-flex align-items-center justify-content-center w-100 mt-md-0 mt-4\">\r\n          <li class=\"me-md-7 me-3 position-relative custom-step-line\">\r\n            <vue-feather type=\"check-circle\" class=\"align-middle me-2\"></vue-feather>\r\n            <span class=\"text-nowrap\">填寫資料</span>\r\n          </li>\r\n          <li class=\"me-md-7 me-3 position-relative custom-step-line\">\r\n            <vue-feather type=\"circle\" class=\"align-middle me-2 text-muted\"></vue-feather>\r\n            <span class=\"text-nowrap text-muted\">建立訂單</span>\r\n          </li>\r\n          <li>\r\n            <vue-feather type=\"circle\" class=\"align-middle me-2 text-muted\"></vue-feather>\r\n            <span class=\"text-nowrap text-muted\">確認付款</span>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    <div class=\"row justify-content-center\">\r\n      <div class=\"col-md-10\">\r\n        <h3 class=\"fw-bold mb-4 pt-3\">填寫資料</h3>\r\n      </div>\r\n    </div>\r\n    <div class=\"row flex-row-reverse justify-content-center pb-7 mb-6\">\r\n      <!-- 訂單內容 -->\r\n      <div class=\"col-md-4\">\r\n        <div class=\"border border-ad-secondary p-4 mb-4\">\r\n          <div\r\n            v-for=\"item in cartData.carts\"\r\n            :key=\"item.id\"\r\n            class=\"d-flex mb-2\">\r\n            <img\r\n              :src=\"item.product.imageUrl\"\r\n              :alt=\"item.product.title\"\r\n              class=\"rounded-1 me-2\"\r\n              style=\"width: 48px; height: 48px; object-fit: cover\">\r\n            <div class=\"w-100\">\r\n              <div class=\"d-flex justify-content-between\">\r\n                <p class=\"mb-0 fw-bold\">{{ item.product.title }}</p>\r\n                <p class=\"mb-0\">$ {{ item.total }}</p>\r\n              </div>\r\n              <p class=\"mb-0 fw-bold\">x {{ item.qty }}</p>\r\n            </div>\r\n          </div>\r\n          <table class=\"table mt-4 border-top border-bottom text-muted\">\r\n            <tbody>\r\n              <tr>\r\n                <th scope=\"row\" class=\"border-0 px-0 pt-4 font-weight-normal\">小計</th>\r\n                <td class=\"text-end border-0 px-0 pt-4\">$ {{ cartData.total }}</td>\r\n              </tr>\r\n              <tr>\r\n                <th scope=\"row\" class=\"border-0 px-0 pt-0 pb-4 font-weight-normal\">優惠券代碼</th>\r\n                <td\r\n                  v-if=\"cartData.final_total === cartData.total\"\r\n                  class=\"text-end border-0 px-0 pt-0 pb-4\">未使用</td>\r\n                <td\r\n                  v-else\r\n                  class=\"text-end text-ad-warning border-0 px-0 pt-0 pb-4\"\r\n                >{{ cartData.carts[0].coupon.code }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n          <div class=\"d-flex justify-content-between mt-4\">\r\n            <p class=\"mb-0 h4 fw-bold\">總計</p>\r\n            <p\r\n              v-if=\"cartData.final_total === cartData.total\"\r\n              class=\"mb-0 h4 fw-bold\">$ {{ cartData.total }}</p>\r\n            <p v-else class=\"mb-0 h4 fw-bold\">$ {{ Math.round(cartData.final_total)}}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- 填寫資料 -->\r\n      <div class=\"col-md-6\">\r\n        <vForm\r\n          action=\"/\" method=\"POST\"\r\n          v-slot=\"{ errors, validate }\" @submit=\"onSubmit\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"email\" class=\"form-label\">\r\n              <span class=\"text-ad-warning\">*</span>Email\r\n            </label>\r\n            <vField\r\n              id=\"email\"\r\n              name=\"Email\"\r\n              type=\"email\"\r\n              class=\"form-control\"\r\n              :class=\"{ 'is-invalid': errors['Email'] }\"\r\n              placeholder=\"請輸入 Email\"\r\n              rules=\"email|required\"\r\n              v-model=\"orderData.user.email\"\r\n            ></vField>\r\n            <error-message name=\"Email\" class=\"invalid-feedback\"></error-message>\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"name\" class=\"form-label\">\r\n              <span class=\"text-ad-warning\">*</span>收件人姓名\r\n            </label>\r\n            <vField\r\n              id=\"name\"\r\n              name=\"姓名\"\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              :class=\"{ 'is-invalid': errors['姓名'] }\"\r\n              placeholder=\"請輸入姓名\" rules=\"required\"\r\n              v-model=\"orderData.user.name\"\r\n            ></vField>\r\n            <error-message name=\"姓名\" class=\"invalid-feedback\"></error-message>\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"tel\" class=\"form-label\">\r\n              <span class=\"text-ad-warning\">*</span>收件人電話\r\n            </label>\r\n            <vField\r\n              id=\"tel\"\r\n              name=\"電話\"\r\n              type=\"tel\"\r\n              class=\"form-control\"\r\n              :class=\"{ 'is-invalid': errors['電話'] }\"\r\n              placeholder=\"請輸入電話，例：02-12345678、(02)12345678、0912345678\"\r\n              rules=\"required\"\r\n              v-model=\"orderData.user.tel\"\r\n            ></vField>\r\n            <error-message name=\"電話\" class=\"invalid-feedback\"></error-message>\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"address\" class=\"form-label\">\r\n              <span class=\"text-ad-warning\">*</span>收件人地址\r\n            </label>\r\n            <vField\r\n              id=\"address\"\r\n              name=\"地址\"\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              :class=\"{ 'is-invalid': errors['地址'] }\"\r\n              placeholder=\"請輸入地址\" rules=\"required\"\r\n              v-model=\"orderData.user.address\"\r\n            ></vField>\r\n            <error-message name=\"地址\" class=\"invalid-feedback\"></error-message>\r\n          </div>\r\n          <div class=\"mt-4 mb-3\">\r\n            <label for=\"message\" class=\"form-label\">其他留言</label>\r\n            <textarea\r\n              class=\"form-control\" id=\"message\" name=\"message\" rows=\"5\"\r\n              v-model=\"orderData.message\"></textarea>\r\n          </div>\r\n          <div class=\"d-flex flex-column-reverse flex-md-row mt-4 justify-content-between align-items-md-center align-items-end w-100\">\r\n            <router-link to=\"/cart\" class=\"text-dark mt-md-0 mt-3\">\r\n              <vue-feather type=\"chevron-left\" class=\"align-middle\"></vue-feather>回到購物車\r\n            </router-link>\r\n            <button\r\n              class=\"btn btn-accent btn-lg px-6\"\r\n              type=\"submit\"\r\n              @click=\"validate\"\r\n            >建立訂單</button>\r\n          </div>\r\n        </vform>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      cartData: {},\r\n      orderData: {\r\n        user: {},\r\n        message: '',\r\n        orderId: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getCartData () {\r\n      const getCartApi = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`\r\n      this.$http\r\n        .get(getCartApi)\r\n        .then((res) => {\r\n          this.cartData = res.data.data\r\n        })\r\n        .catch((error) => {\r\n          console.log(error.data.data.message)\r\n        })\r\n    },\r\n    isPhone (value) {\r\n      // eslint-disable-next-line\r\n      const phoneNumber = /(^[0-9]{2,4}\\-[0-9]{5,8}$)|(^\\([0-9]{2,4}\\)[0-9]{5,8}$)|^(09)[0-9]{8}$/\r\n      return phoneNumber.test(value) ? true : '需要正確的電話號碼'\r\n    },\r\n    onSubmit () {\r\n      const data = this.orderData\r\n      const orderApi = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order`\r\n      this.$http\r\n        .post(orderApi, { data })\r\n        .then((res) => {\r\n          alert(res.data.message)\r\n          this.orderData.orderId = res.data.orderId\r\n          this.$router.push({ path: `/checkout/confirm/${this.orderData.orderId}` }) // 轉址不成功\r\n          console.log(this.orderData.orderId)\r\n        })\r\n        .catch((error) => {\r\n          console.log(error.response.data.message)\r\n        })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getCartData()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./CheckoutForm.vue?vue&type=template&id=152fe261\"\nimport script from \"./CheckoutForm.vue?vue&type=script&lang=js\"\nexport * from \"./CheckoutForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\_Front_end\\\\_Hexschool_Vue\\\\p-blossom\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","scope","for","_createElementBlock","_createVNode","_component_vue_feather","type","_hoisted_6","_hoisted_8","_hoisted_9","_hoisted_10","_Fragment","_renderList","$data","carts","item","key","id","src","product","imageUrl","alt","title","style","_toDisplayString","total","qty","_hoisted_21","_hoisted_23","final_total","coupon","code","_hoisted_27","Math","round","_component_vForm","action","method","onSubmit","$options","errors","validate","_hoisted_32","_component_vField","name","placeholder","rules","user","email","$event","_component_error_message","_hoisted_34","_hoisted_36","tel","_hoisted_38","address","_hoisted_40","rows","message","_component_router_link","to","onClick","_hoisted_43","data","cartData","orderData","orderId","methods","getCartData","getCartApi","this","$http","get","then","res","catch","error","console","log","isPhone","value","phoneNumber","test","orderApi","post","alert","$router","push","path","response","mounted","__exports__","render"],"sourceRoot":""}