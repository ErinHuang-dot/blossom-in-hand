"use strict";(self["webpackChunkp_blossom"]=self["webpackChunkp_blossom"]||[]).push([[533],{5533:function(e,a,t){t.r(a),t.d(a,{default:function(){return X}});var l=t(6252),s=t(3577),r=t(9963);const o={class:"container"},d={class:"row justify-content-center"},c={class:"col-md-10 py-6"},n={class:"list-unstyled mb-0 ms-md-auto d-flex align-items-center justify-content-center w-100 mt-md-0 mt-4"},i={class:"me-md-7 me-3 position-relative custom-step-line"},m=(0,l._)("span",{class:"text-nowrap"},"填寫資料",-1),u={class:"me-md-7 me-3 position-relative custom-step-line"},p=(0,l._)("span",{class:"text-nowrap text-muted"},"建立訂單",-1),b=(0,l._)("span",{class:"text-nowrap text-muted"},"確認付款",-1),_=(0,l._)("div",{class:"row justify-content-center"},[(0,l._)("div",{class:"col-md-10"},[(0,l._)("h3",{class:"fw-bold mb-4 pt-3"},"填寫資料")])],-1),f={class:"row flex-row-reverse justify-content-center pb-7 mb-6"},h={class:"col-md-4"},w={class:"border border-ad-secondary p-4 mb-4"},v=["src","alt"],g={class:"w-100"},x={class:"d-flex justify-content-between"},D={class:"mb-0 fw-bold"},y={class:"mb-0"},k={class:"mb-0 fw-bold"},W={class:"table mt-4 border-top border-bottom text-muted"},V=(0,l._)("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"小計",-1),U={class:"text-end border-0 px-0 pt-4"},$=(0,l._)("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"優惠券代碼",-1),C={key:0,class:"text-end border-0 px-0 pt-0 pb-4"},j={key:1,class:"text-end text-ad-warning border-0 px-0 pt-0 pb-4"},z={class:"d-flex justify-content-between mt-4"},q=(0,l._)("p",{class:"mb-0 h4 fw-bold"},"總計",-1),E={key:0,class:"mb-0 h4 fw-bold"},I={key:1,class:"mb-0 h4 fw-bold"},S={class:"col-md-6"},F={class:"mb-3"},P=(0,l._)("label",{for:"email",class:"form-label"},[(0,l._)("span",{class:"text-ad-warning"},"*"),(0,l.Uk)("Email ")],-1),H={class:"mb-3"},K=(0,l._)("label",{for:"name",class:"form-label"},[(0,l._)("span",{class:"text-ad-warning"},"*"),(0,l.Uk)("收件人姓名 ")],-1),M={class:"mb-3"},O=(0,l._)("label",{for:"tel",class:"form-label"},[(0,l._)("span",{class:"text-ad-warning"},"*"),(0,l.Uk)("收件人電話 ")],-1),T={class:"mb-3"},Y=(0,l._)("label",{for:"address",class:"form-label"},[(0,l._)("span",{class:"text-ad-warning"},"*"),(0,l.Uk)("收件人地址 ")],-1),Z={class:"mt-4 mb-3"},A=(0,l._)("label",{for:"message",class:"form-label"},"其他留言",-1),B={class:"d-flex flex-column-reverse flex-md-row mt-4 justify-content-between align-items-md-center align-items-end w-100"},G=(0,l.Uk)("回到購物車 "),J=["onClick"];function L(e,a,t,L,N,Q){const R=(0,l.up)("vue-feather"),X=(0,l.up)("vField"),ee=(0,l.up)("error-message"),ae=(0,l.up)("router-link"),te=(0,l.up)("vForm");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l._)("div",d,[(0,l._)("div",c,[(0,l._)("ul",n,[(0,l._)("li",i,[(0,l.Wm)(R,{type:"check-circle",class:"align-middle me-2"}),m]),(0,l._)("li",u,[(0,l.Wm)(R,{type:"circle",class:"align-middle me-2 text-muted"}),p]),(0,l._)("li",null,[(0,l.Wm)(R,{type:"circle",class:"align-middle me-2 text-muted"}),b])])])]),_,(0,l._)("div",f,[(0,l._)("div",h,[(0,l._)("div",w,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(N.cartData.carts,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id,class:"d-flex mb-2"},[(0,l._)("img",{src:e.product.imageUrl,alt:e.product.title,class:"rounded-1 me-2",style:{width:"48px",height:"48px","object-fit":"cover"}},null,8,v),(0,l._)("div",g,[(0,l._)("div",x,[(0,l._)("p",D,(0,s.zw)(e.product.title),1),(0,l._)("p",y,"$ "+(0,s.zw)(e.total),1)]),(0,l._)("p",k,"x "+(0,s.zw)(e.qty),1)])])))),128)),(0,l._)("table",W,[(0,l._)("tbody",null,[(0,l._)("tr",null,[V,(0,l._)("td",U,"$ "+(0,s.zw)(N.cartData.total),1)]),(0,l._)("tr",null,[$,N.cartData.final_total===N.cartData.total?((0,l.wg)(),(0,l.iD)("td",C,"未使用")):((0,l.wg)(),(0,l.iD)("td",j,(0,s.zw)(N.cartData.carts[0].coupon.code),1))])])]),(0,l._)("div",z,[q,N.cartData.final_total===N.cartData.total?((0,l.wg)(),(0,l.iD)("p",E,"$ "+(0,s.zw)(N.cartData.total),1)):((0,l.wg)(),(0,l.iD)("p",I,"$ "+(0,s.zw)(Math.round(N.cartData.final_total)),1))])])]),(0,l._)("div",S,[(0,l.Wm)(te,{action:"/",method:"POST",onSubmit:Q.onSubmit},{default:(0,l.w5)((({errors:e,validate:t})=>[(0,l._)("div",F,[P,(0,l.Wm)(X,{id:"email",name:"Email",type:"email",class:(0,s.C_)(["form-control",{"is-invalid":e["Email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:N.orderData.user.email,"onUpdate:modelValue":a[0]||(a[0]=e=>N.orderData.user.email=e)},null,8,["class","modelValue"]),(0,l.Wm)(ee,{name:"Email",class:"invalid-feedback"})]),(0,l._)("div",H,[K,(0,l.Wm)(X,{id:"name",name:"姓名",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:N.orderData.user.name,"onUpdate:modelValue":a[1]||(a[1]=e=>N.orderData.user.name=e)},null,8,["class","modelValue"]),(0,l.Wm)(ee,{name:"姓名",class:"invalid-feedback"})]),(0,l._)("div",M,[O,(0,l.Wm)(X,{id:"tel",name:"電話",type:"tel",class:(0,s.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話，例：02-12345678、(02)12345678、0912345678",rules:"required",modelValue:N.orderData.user.tel,"onUpdate:modelValue":a[2]||(a[2]=e=>N.orderData.user.tel=e)},null,8,["class","modelValue"]),(0,l.Wm)(ee,{name:"電話",class:"invalid-feedback"})]),(0,l._)("div",T,[Y,(0,l.Wm)(X,{id:"address",name:"地址",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:N.orderData.user.address,"onUpdate:modelValue":a[3]||(a[3]=e=>N.orderData.user.address=e)},null,8,["class","modelValue"]),(0,l.Wm)(ee,{name:"地址",class:"invalid-feedback"})]),(0,l._)("div",Z,[A,(0,l.wy)((0,l._)("textarea",{class:"form-control",id:"message",name:"message",rows:"5","onUpdate:modelValue":a[4]||(a[4]=e=>N.orderData.message=e)},null,512),[[r.nr,N.orderData.message]])]),(0,l._)("div",B,[(0,l.Wm)(ae,{to:"/cart",class:"text-dark mt-md-0 mt-3"},{default:(0,l.w5)((()=>[(0,l.Wm)(R,{type:"chevron-left",class:"align-middle"}),G])),_:1}),(0,l._)("button",{class:"btn btn-accent btn-lg px-6",type:"submit",onClick:t},"建立訂單",8,J)])])),_:1},8,["onSubmit"])])])])}var N={data(){return{cartData:{},orderData:{user:{},message:"",orderId:""}}},methods:{getCartData(){const e="https://vue3-course-api.hexschool.io/v2/api/erinhuang-lab/cart";this.$http.get(e).then((e=>{this.cartData=e.data.data})).catch((e=>{console.log(e.data.data.message)}))},isPhone(e){const a=/(^[0-9]{2,4}\-[0-9]{5,8}$)|(^\([0-9]{2,4}\)[0-9]{5,8}$)|^(09)[0-9]{8}$/;return!!a.test(e)||"需要正確的電話號碼"},onSubmit(){const e=this.orderData,a="https://vue3-course-api.hexschool.io/v2/api/erinhuang-lab/order";this.$http.post(a,{data:e}).then((e=>{alert(e.data.message),this.orderData.orderId=e.data.orderId,this.$router.push({path:`/checkout/confirm/${this.orderData.orderId}`}),console.log(this.orderData.orderId)})).catch((e=>{console.log(e.response.data.message)}))}},mounted(){this.getCartData()}},Q=t(3744);const R=(0,Q.Z)(N,[["render",L]]);var X=R}}]);
//# sourceMappingURL=533.82e03922.js.map